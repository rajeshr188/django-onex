{% extends "_base.html" %}
{%load static%}
{%load django_tables2%}
{% load widget_tweaks %}
{{filter.form.media}}

{%block content%}

<div id="customer-content" class="container mx-auto p-4 py-md-5" hx-target="this" hx-get="{% url 'contact_customer_list'%}" hx-trigger="listChanged from:body">
 
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">Customers</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2">
        <a class="btn btn-primary mr-2" 
            hx-get="{% url 'contact_customer_create' %}" 
            hx-push-url="true"
            hx-target = "#customer-content"
            hx-swap="innerHTML transition:true"
            hx-trigger="click, keyup[shiftKey&&key=='N'] from:body"
            role="button">New Customer</a>
        <a class="btn btn-primary mr-2" 
            hx-get="{% url 'contact_customer_merge' %}" 
            hx-push-url="true"
            role="button">Merge Customer</a>
      </div>
    </div>
  </div>
  
  <div class="row" id="main-content">
    <div class="col-sm-3" id="filter">
      <div class="position-relative h-20" id ="filter">
        {% if filter %}
        <div class="card text-center">
            <div class="card-header">
                Filter
            </div>
            <div class="card-body">
                <form hx-trigger="keyup,change,listChanged from:body delay:100ms" 
                        hx-get="."
                        hx-select="#table" 
                        hx-target="#table"
                        hx-swap = "outerHTML"
                        hx-push-url="true"     
                        class = "form-inline">
                    {%for field in filter.form%}
                      <div class="form-floating mb-3">
                        {%render_field field|add_class:"form-control"%}
                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                      </div>
                    {%endfor%}
                </form>
            </div>
        </div>
        {% endif %}
      </div>
    </div>
    {%block table%}
    <div class="col table-responsive" id = "table"> 
      <p>Results :{{table.paginator.count}} </p> 
      {% render_table table %} 
    </div>
    {%endblock%}
  </div>
</div>


{%endblock%}
